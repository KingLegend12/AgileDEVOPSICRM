(this.webpackJsonpinternship_frontend=this.webpackJsonpinternship_frontend||[]).push([[0],{123:function(e,t,r){},124:function(e,t,r){},125:function(e,t,r){},150:function(e,t,r){},151:function(e,t,r){},232:function(e,t,r){},233:function(e,t,r){},234:function(e,t,r){},236:function(e,t,r){},237:function(e,t,r){},239:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(27),s=r.n(c),i=(r(123),r(124),r(10)),o=(r(125),r(111)),l=r(5),u=r.n(l),j=r(9),d=r(24),b=Object(d.b)({name:"user",initialState:{user:{},isLoading:!1,error:"",successMsg:""},reducers:{getUserPending:function(e){e.isLoading=!0},getUserSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.user=r,e.error=""},getUserFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},AddUserPending:function(e){e.isLoading=!0},AddUserSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.user=r,e.error=""},AddUserFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},restSuccessMSg:function(e){e.isLoading=!0,e.successMsg="Utilisateur Ajouter avec success"}}}),h=b.actions,p=h.getUserPending,x=h.getUserSuccess,O=h.getUserFail,m=h.AddUserFail,f=h.AddUserPending,g=h.AddUserSuccess,v=(h.restSuccessMSg,b.reducer),k=r(18),w=r.n(k),y="https://devagileicrm.herokuapp.com/v1/",S=y+"admin",L=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("https://devagileicrm.herokuapp.com/v1/user/UserAddedFromAdmin",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},C=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("https://devagileicrm.herokuapp.com/v1/admin",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},T=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.patch("https://devagileicrm.herokuapp.com/v1/admin/verify",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&r(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({status:"error",message:t.t0.error});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},N=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("https://devagileicrm.herokuapp.com/v1/admin/login",e);case 3:n=t.sent,r(n.data),"success"===n.data.status&&(sessionStorage.setItem("accessJWT",n.data.accessJWT),localStorage.setItem("crmSite",JSON.stringify({refreshJWT:n.data.refreshJWT}))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())},P=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/admin/client/"+e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},A=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.delete("https://devagileicrm.herokuapp.com/v1/admin/logout",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),F=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(p()),e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=sessionStorage.getItem("accessJWT"))||r("Token not found!"),e.next=5,w.a.get(S,{headers:{Authorization:a}});case 5:n=e.sent,t(n.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:if(!(r=e.sent).admin||!r.admin._id){e.next=7;break}return e.abrupt("return",t(x(r.admin)));case 7:t(O("User is not found")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(O(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(f()),t.next=4,L(e);case 4:return t.sent,t.abrupt("return",r(g("Utilisateur Ajout\xe9 avec success")));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",r(m(t.t0)));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},E=r(20),M=r(244),z=r(245),J=r(108),q=r(250),W=r(248),U=r(110),G=r(246),R=Object(d.b)({name:"login",initialState:{isLoading:!1,isAuth:!1,error:""},reducers:{loginPending:function(e){e.isLoading=!0},loginSuccess:function(e){e.isLoading=!1,e.isAuth=!0,e.error=""},loginFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r}}}),D=R.reducer,_=R.actions,B=_.loginPending,H=_.loginSuccess,K=_.loginFail,V=D,$=r(8),Z=r(1),Y=function(e){var t=e.frmSwitcher,r=Object($.b)(),n=Object(E.k)(),c=(Object(E.l)(),Object($.c)((function(e){return e.login}))),s=c.isLoading,o=c.error;Object(a.useEffect)((function(){sessionStorage.getItem("accessJWT")&&n.push("/dashboard")}),[n]);var l=Object(a.useState)("d.jaidi@aui.ma"),d=Object(i.a)(l,2),b=d[0],h=d[1],p=Object(a.useState)("sfsd#3Dsga"),x=Object(i.a)(p,2),O=x[0],m=x[1],f=function(e){var t=e.target,r=t.name,a=t.value;switch(r){case"email":h(a);break;case"password":m(a)}console.log(r,a)},g=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b&&O||alert("Veuillez remplir les champs"),r(B()),e.prev=3,e.next=6,N({email:b,password:O});case 6:if("error"!==(a=e.sent).status){e.next=9;break}return e.abrupt("return",r(K(a.message)));case 9:r(H()),r(F()),n.push("/dashboard"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r(K(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("h1",{className:"text-info text-center",children:"Se Connecter"}),Object(Z.jsx)("hr",{}),o&&Object(Z.jsx)(q.a,{variant:"danger",children:o}),Object(Z.jsxs)(W.a,{autoComplete:"off",onSubmit:g,children:[Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Addresse Email"}),Object(Z.jsx)(W.a.Control,{type:"email",name:"email",onChange:f,value:b,placeholder:"Entrez votre addresse email",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Mot de passe"}),Object(Z.jsx)(W.a.Control,{type:"password",name:"password",onChange:f,value:O,placeholder:"Mot de passe",required:!0})]}),Object(Z.jsx)(U.a,{type:"submit",children:"Se connecter"}),s&&Object(Z.jsx)(G.a,{variant:"primary",animation:"border"})]}),Object(Z.jsx)("hr",{})]})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("a",{href:"#!",onClick:function(){return t("reset")},children:"Mot de passe oubli\xe9 ?"})})}),Object(Z.jsx)(z.a,{className:"py-4",children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("a",{href:"/registration",children:"Cr\xe9er un compte"})})})]})},Q=function(e){var t=e.handleOnChange,r=e.handleOnResetSubmit,a=e.email,n=e.frmSwitcher;return Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("h1",{className:"text-info text-center",children:"R\xe9initialiser le mot de passe"}),Object(Z.jsx)("hr",{}),Object(Z.jsxs)(W.a,{autoComplete:"off",onSubmit:r,children:[Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Addresse Email"}),Object(Z.jsx)(W.a.Control,{type:"email",name:"email",onChange:t,value:a,placeholder:"Entrez votre addresse email",required:!0})]}),Object(Z.jsx)(U.a,{type:"submit",children:"Envoyer le code"})]}),Object(Z.jsx)("hr",{})]})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("a",{href:"#!",onClick:function(){return n("login")},children:"Se Connecter ?"})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("a",{href:"resetpasswordform",children:"Testing Forgot pass interface"})})})]})},X=r(31),ee=r(17),te=(r(150),{pin:"",password:"sfsd#3Dsg",confirmPass:"sfsd#3Dsg"}),re={isLenthy:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpclChr:!1,confirmPass:!1},ae=function(){Object($.b)();var e=Object(a.useState)(te),t=Object(i.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(re),s=Object(i.a)(c,2),o=s[0],l=s[1],u=function(e){var t=e.target,a=t.name,c=t.value;if(n(Object(ee.a)(Object(ee.a)({},r),{},Object(X.a)({},a,c))),"password"===a){var s=c.length>8,i=/[A-Z]/.test(c),u=/[a-z]/.test(c),j=/[0-9]/.test(c),d=/[@,#,$,%,&]/.test(c);l(Object(ee.a)(Object(ee.a)({},o),{},{isLenthy:s,hasUpper:i,hasLower:u,hasNumber:j,hasSpclChr:d}))}"confirmPass"===a&&l(Object(ee.a)(Object(ee.a)({},o),{},{confirmPass:r.password===c}))};return Object(Z.jsxs)(M.a,{className:"bg-white form-box2",children:[Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("h1",{className:"text-info",children:"Update Password"})})}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsxs)(W.a,{onSubmit:function(e){e.preventDefault()},children:[Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"OTP"}),Object(Z.jsx)(W.a.Control,{type:"number",name:"pin",value:r.pin,onChange:u,placeholder:"OTP",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Password"}),Object(Z.jsx)(W.a.Control,{type:"password",name:"password",value:r.password,onChange:u,placeholder:"Password",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Confirm Password"}),Object(Z.jsx)(W.a.Control,{type:"password",name:"confirmPass",value:r.confirmPass,onChange:u,placeholder:"Confirm Password",required:!0})]}),Object(Z.jsx)(W.a.Text,{children:!o.confirmPass&&Object(Z.jsx)("div",{className:"text-danger mb-3",children:"Password doesn't match!"})}),Object(Z.jsxs)("ul",{className:"mb-4",children:[Object(Z.jsx)("li",{className:o.isLenthy?"text-success":"text-danger",children:"Min 8 characters"}),Object(Z.jsx)("li",{className:o.hasUpper?"text-success":"text-danger",children:"At least one upper case"}),Object(Z.jsx)("li",{className:o.hasLower?"text-success":"text-danger",children:"At least one lower case"}),Object(Z.jsx)("li",{className:o.hasNumber?"text-success":"text-danger",children:"At least one number"}),Object(Z.jsxs)("li",{className:o.hasSpclChr?"text-success":"text-danger",children:["At least on of the special characters i.e @ # $ % &"," "]})]}),Object(Z.jsx)(U.a,{variant:"primary",type:"submit",disabled:Object.values(o).includes(!1),children:"Submit"})]})})})]})},ne=function(){var e=Object(a.useState)("login"),t=Object(i.a)(e,2),r=t[0],n=t[1],c=function(e){e.preventDefault()},s=function(e){n(e)};return Object(Z.jsx)("div",{className:"entry-page",id:"classicformpage",children:Object(Z.jsxs)(o.a,{className:"form-box",style:{backgroundColor:"none","box-shadow":"0px -16px 60px orangered"},children:["login"===r&&Object(Z.jsx)(Y,{frmSwitcher:s}),"reset"===r&&Object(Z.jsx)(Q,{handleOnResetSubmit:c,frmSwitcher:s}),"pinnumber"===r&&Object(Z.jsx)(ae,{handleOnResetSubmit:c,frmSwitcher:s})]})})},ce=function(){return Object(Z.jsx)("div",{className:"text-center copy-right",children:"\xa9 iCRM all right reserved -2021"})},se=r(251),ie=r(249),oe=r.p+"static/media/dev.ed29adee.png",le=(r(151),r(38)),ue=function(){var e=Object(E.k)(),t=Object($.c)((function(e){return e.user})).user;return Object(Z.jsxs)(se.a,{collapseOnSelect:!0,bg:"",variant:"dark",expand:"md",children:[Object(Z.jsx)(se.a.Brand,{children:Object(Z.jsx)("img",{src:oe,alt:"logo",width:"65px"})}),Object(Z.jsxs)("h3",{style:{"text-shadow":"0 0 4px #fff, 0 0 11px #fff, 0 0 19px #fff, 0 0 40px orangered, 0 0 80px orangered, 0 0 90px orangered, 0 0 100px orangered, 0 0 150px orangered"},children:["Bienvenue Admin ",t.name]}),Object(Z.jsxs)("h3",{style:{"text-shadow":"0 0 4px #fff, 0 0 11px #fff, 0 0 19px #fff, 0 0 40px orangered, 0 0 80px orangered, 0 0 90px orangered, 0 0 100px orangered, 0 0 150px orangered","margin-left":"20px"},children:["Specialit\xe9: ",t.speciality]}),Object(Z.jsx)(se.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(Z.jsx)(se.a.Collapse,{id:"basic-navbar-nav",children:Object(Z.jsxs)(ie.a,{className:"ml-auto",children:[Object(Z.jsx)(le.LinkContainer,{to:"/dashboard",children:Object(Z.jsx)(ie.a.Link,{children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"L'interface"})})}),Object(Z.jsx)(le.LinkContainer,{to:"/Allclients",children:Object(Z.jsx)(ie.a.Link,{children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Les clients"})})}),Object(Z.jsx)(le.LinkContainer,{to:"/P-Btickets",children:Object(Z.jsx)(ie.a.Link,{children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Les tickets P_B"})})}),Object(Z.jsx)(le.LinkContainer,{to:"/P-Mtickets",children:Object(Z.jsx)(ie.a.Link,{children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Les tickets P_M"})})}),Object(Z.jsx)(le.LinkContainer,{to:"/P-Etickets",children:Object(Z.jsx)(ie.a.Link,{children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Les tickets P_E"})})}),Object(Z.jsx)(ie.a.Link,{onClick:function(){sessionStorage.removeItem("accessJWT"),localStorage.removeItem("crmSite"),A(),e.push("/")},children:Object(Z.jsx)(U.a,{variant:"outline-light",size:"lg",className:"HeaderBTN",children:"Se Deconnecter"})})]})})]})},je=function(e){var t=e.children;return Object(Z.jsxs)("div",{className:"default-layout",children:[Object(Z.jsx)("div",{className:"header",children:Object(Z.jsx)(ue,{})}),Object(Z.jsx)("main",{className:"main",children:t}),Object(Z.jsx)("footer",{className:"footer",children:Object(Z.jsx)(ce,{})})]})},de=Object(d.b)({name:"ticketList",initialState:{tickets:[],isLoading:!1,error:"",searchTicketList:[],selectedTicket:{},replyMsg:""},reducers:{fetchTicketLoading:function(e,t){e.isLoading=!0},fetchTicketSuccess:function(e,t){e.tickets=t.payload,e.searchTicketList=t.payload,e.isLoading=!1},fetchTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},searchTickets:function(e,t){var r=t.payload;e.searchTicketList=e.tickets.filter((function(e){return r?e.subject.toLowerCase().includes(r.toLowerCase()):e}))},searchTicketsByPriority:function(e,t){var r=t.payload;e.searchTicketList=e.tickets.filter((function(e){return r?e.priority.toLowerCase().includes(r.toLowerCase()):e}))},fetchSingleTicketLoading:function(e){e.isLoading=!0},fetchSingleTicketSuccess:function(e,t){var r=t.payload;e.selectedTicket=r,e.isLoading=!1,e.error=""},fetchSingleTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},replyTicketLoading:function(e){e.isLoading=!0},replyTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.error="",e.replyMsg=r},replyTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.replyTicketError=r},closeTicketLoading:function(e){e.isLoading=!0},closeTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.error="",e.replyMsg=r},closeTicketFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},resetResponseMsg:function(e){e.isLoading=!1,e.replyTicketError="",e.replyMsg=""}}}),be=de.reducer,he=de.actions,pe=he.fetchTicketLoading,xe=he.fetchTicketSuccess,Oe=he.fetchTicketFail,me=he.searchTickets,fe=he.fetchSingleTicketLoading,ge=he.fetchSingleTicketSuccess,ve=he.fetchSingleTicketFail,ke=he.replyTicketLoading,we=he.replyTicketSuccess,ye=he.replyTicketFail,Se=he.closeTicketLoading,Le=he.closeTicketSuccess,Ce=he.closeTicketFail,Te=he.resetResponseMsg,Ne=(he.searchTicketsByPriority,be),Pe="hhttps://devagileicrm.herokuapp.com/v1/",Ae=Pe+"ticket/",Fe=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.get(Ae+"admin/"+e,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},Ie=function(e,t){return new Promise(function(){var r=Object(j.a)(u.a.mark((function r(a,n){var c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w.a.put(Ae+"admin/"+e,t,{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:c=r.sent,a(c.data),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0.message),n(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}())},Ee=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.patch("hhttps://devagileicrm.herokuapp.com/v1/ticket/treat-ticket/"+e,{},{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},Me=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.patch("hhttps://devagileicrm.herokuapp.com/v1/ticket/admin_FinalClose-ticket/"+e,{},{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},ze=function(e){return new Promise(function(){var t=Object(j.a)(u.a.mark((function t(r,a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.patch("hhttps://devagileicrm.herokuapp.com/v1/ticket/admin_close-ticket/"+e,{},{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:n=t.sent,r(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message),a(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}())},Je=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(pe()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/ticket/basse",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(xe(r.data.result)),r.data.result||t(Oe({message:"error couldn't load"})),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Oe(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},qe=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(fe()),t.prev=1,t.next=4,Fe(e);case 4:a=t.sent,r(ge(a.data.result.length&&a.data.result[0])),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(ve(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},We=r(61),Ue=r(247),Ge=r(62),Re=r.n(Ge),De=r(63),_e=r.n(De),Be=r(15),He=function(){var e=Object($.c)((function(e){return e.tickets})),t=e.searchTicketList,r=e.isLoading,a=e.error,n=t;if(r)return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(We.WindMillLoading,{}),Object(Z.jsx)("h3",{style:{"text-align":"center","margin-top":"150px",color:"cyan"},children:"Loading..."})]});if(a)return Object(Z.jsx)("h3",{children:a});var c=[{dataField:"_id",text:"Identifiant du ticket"},{dataField:"subject",text:"Sujet",formatter:function(e,t,r,a){return Object(Z.jsx)(Be.Link,{to:"/ticket/".concat(t._id),children:t.subject})}},{dataField:"status",text:"Status"},{dataField:"priority",text:"Priorit\xe9",style:function(e,t,r,a){return"Elev\xe9e"===e?{backgroundColor:"red"}:"Moyenne"===e?{backgroundColor:"orange"}:{backgroundColor:"green"}}},{dataField:"openAt",text:"Date d'ouverture"}];return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(M.a,{children:t.length?Object(Z.jsx)(_e.a,{classes:"table table-striped table-dark",hover:!0,keyField:"id",data:n,columns:c,responsive:!0,pagination:Re()()}):Object(Z.jsx)(Ue.a,{className:"table table-striped table-dark",children:Object(Z.jsx)("tr",{children:Object(Z.jsxs)("td",{colSpan:"5",className:"text-center",children:["Vous n'avez auncun ticket de reclamation en cours",""]})})})})})},Ke=(r(232),r(252)),Ve=function(e){var t=e.page;return Object(Z.jsxs)(Ke.a,{children:[Object(Z.jsx)(le.LinkContainer,{to:"/dashboard",children:Object(Z.jsx)(Ke.a.Item,{children:"Home"})}),Object(Z.jsx)(Ke.a.Item,{active:!0,children:t})]})},$e=function(){var e=Object($.b)(),t=Object($.c)((function(e){return e.user})).user,r=Object(a.useState)(""),n=Object(i.a)(r,2),c=n[0];n[1];Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(pe()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/ticket/AllTickets",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(xe(r.data.result)),r.data.result||t(Oe({message:"error couldn't load"})),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Oe(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())}),[c,e]);var s=Object($.c)((function(e){return e.tickets})).tickets,o=s.filter((function(e){return"Fermer"!==e.status})),l=s.length;return Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Ve,{page:"Dashboard"})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{style:{color:"black"},children:[" ",Object(Z.jsxs)("h3",{children:[" Role: ",t.etape," "]})]})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{className:"text-center mt-5 mb-2",children:Object(Z.jsx)(Be.Link,{to:"/add-ticket",children:Object(Z.jsx)(U.a,{className:"HeaderBTN",variant:"success",style:{"font-size":"2rem","border-radius":"2rem"},children:"Ajouter un client"})})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{className:"text-center mb-2",children:[Object(Z.jsx)("div",{children:Object(Z.jsxs)("h2",{children:["Total des tickets: ",l]})}),Object(Z.jsx)("div",{children:Object(Z.jsxs)("h2",{children:["Mes tickets en attente: ",o.length]})})]})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{className:"text-center mb-2",style:{"font-size":"1.5rem"},children:"Ticket Ajout\xe9 recently"})}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{className:"recent-ticket",children:Object(Z.jsx)(He,{})})})]})},Ze=(r(233),{name:"",message:""}),Ye={subject:!1,issueDate:!1,message:!1},Qe=function(){var e=Object(a.useState)(Ze),t=Object(i.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(Ye),s=Object(i.a)(c,2),l=(s[0],s[1]),d=Object(a.useState)("Selectioner"),b=Object(i.a)(d,2),h=(b[0],b[1],Object($.b)()),p=!1,x=function(e){var t=e.target,a=t.name,c=t.value;n(Object(ee.a)(Object(ee.a)({},r),{},Object(X.a)({},a,c))),console.log(a,c)},O=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),l(Ye),l(Object(ee.a)({},Ye)),p=!0,h(I(Object(ee.a)({},r)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)(o.a,{style:{background:"none"},className:"mt-3 add-new-ticket",children:[Object(Z.jsx)("h1",{className:"text-center",children:"Ajouter un Nouveau Client"}),Object(Z.jsx)("hr",{style:{backgroundColor:"orangered"}}),Object(Z.jsx)("div",{children:p&&Object(Z.jsxs)(q.a,{variant:"primary",children:[" ","Utilisateur Ajout\xe9 avec succ\xe9ss"]})}),Object(Z.jsxs)(W.a,{autoComplete:"off",onSubmit:O,children:[Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Nom complet"}),Object(Z.jsx)(W.a.Control,{name:"name",value:r.name,onChange:x,minLength:"3",maxLength:"50",placeholder:"...",required:!0}),Object(Z.jsx)(W.a.Text,{className:"text-danger"})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Nom de l'entreprise"}),Object(Z.jsx)(W.a.Control,{name:"company",value:r.company,onChange:x,placeholder:"...",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Addresse"}),Object(Z.jsx)(W.a.Control,{name:"address",value:r.address,onChange:x,placeholder:"...",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Telephone"}),Object(Z.jsx)(W.a.Control,{name:"phone",value:r.phone,onChange:x,placeholder:"...",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"email"}),Object(Z.jsx)(W.a.Control,{name:"email",value:r.email,onChange:x,placeholder:"...",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Mot de passe"}),Object(Z.jsx)(W.a.Control,{name:"password",value:r.password,onChange:x,placeholder:"...",required:!0})]}),Object(Z.jsx)(U.a,{type:"submit",variant:"info",children:"Ajouter"})]})]})},Xe={subject:"",issueDate:"",detail:""},et=function(){var e=Object(a.useState)(Xe),t=Object(i.a)(e,2);t[0],t[1];return Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Ve,{page:"New Ticket"})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Qe,{})})})]})},tt=function(){var e=Object($.b)();return Object(Z.jsx)("div",{children:Object(Z.jsx)(W.a,{children:Object(Z.jsxs)(W.a.Group,{as:z.a,children:[Object(Z.jsx)(W.a.Label,{column:!0,sm:"3",style:{color:"white",boxShadow:"0px 3px 9px black"},children:"Rechercher:"}),Object(Z.jsx)(J.a,{sm:"9",children:Object(Z.jsx)(W.a.Control,{name:"searchStr",onChange:function(t){var r,a=t.target.value;e((r=a,function(e){e(me(r))})),console.log(a)},placeholder:"Rechercher ..."})})]})})})},rt=(r(49),function(){var e=Object($.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];return Object(a.useEffect)((function(){e(Je())}),[n,e]),Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(Ve,{page:"Ticket Lists"})]})}),Object(Z.jsxs)(z.a,{className:"mt-4",children:[Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Be.Link,{to:"/add-ticket",children:Object(Z.jsx)(U.a,{variant:"info",children:"Ajouter un nouveau client"})})}),Object(Z.jsx)(J.a,{className:"text-right",children:Object(Z.jsx)(tt,{})})]}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(He,{})})})]})}),at=function(){var e=Object($.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];return Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(pe()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/ticket/moyenne",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(xe(r.data.result)),r.data.result||t(Oe({message:"error couldn't load"})),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Oe(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())}),[n,e]),Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(Ve,{page:"Ticket Lists"})]})}),Object(Z.jsxs)(z.a,{className:"mt-4",children:[Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Be.Link,{to:"/add-ticket",children:Object(Z.jsx)(U.a,{variant:"info",children:"Ajouter un nouveau client"})})}),Object(Z.jsx)(J.a,{className:"text-right",children:Object(Z.jsx)(tt,{})})]}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(He,{})})})]})},nt=function(){var e=Object($.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];return Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(pe()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/ticket/elevee",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(xe(r.data.result)),r.data.result||t(Oe({message:"error couldn't load"})),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Oe(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())}),[n,e]),Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(Ve,{page:"Ticket Lists"})]})}),Object(Z.jsxs)(z.a,{className:"mt-4",children:[Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Be.Link,{to:"/add-ticket",children:Object(Z.jsx)(U.a,{variant:"info",children:"Ajouter un nouveau client"})})}),Object(Z.jsx)(J.a,{className:"text-right",children:Object(Z.jsx)(tt,{})})]}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(He,{})})})]})},ct=(r(234),function(e){var t=e.msg,r=Object($.b)();Object(a.useEffect)((function(){r(F())}),[r]);var n=Object($.c)((function(e){return e.user})).user;return console.log(t),t?t.map((function(e,t){return Object(Z.jsxs)("div",{style:{"flex-direction":e.sender==n.name?"row":"row-reverse",color:e.sender==n.name?"black":"blue"},className:"message-history mt-3",children:[Object(Z.jsxs)("div",{className:"send font-weight-bold text-secondary",style:{"box-shadow":" 0px 0px 30px orangered","border-radius":"1rem",padding:"1rem","flex-direction":e.sender==n.name?"row":"row-reverse"},children:[Object(Z.jsx)("div",{className:"sender",children:e.sender}),Object(Z.jsx)("div",{className:"date",children:e.msgAt&&new Date(e.msgAt).toLocaleString()})]}),Object(Z.jsxs)("div",{className:"message",children:[" ",e.message]})]},t)})):null}),st=function(e){var t=e._id,r=Object($.b)();Object(a.useEffect)((function(){r(F())}),[r]);var n=Object($.c)((function(e){return e.user})).user.name,c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(Z.jsxs)(W.a,{onSubmit:function(e){e.preventDefault();var a={message:o,sender:n};console.log(a),r(function(e,t){return function(){var r=Object(j.a)(u.a.mark((function r(a){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(ke()),r.prev=1,r.next=4,Ie(e,t);case 4:if(n=r.sent,console.log(n),"error"!==n.status){r.next=8;break}return r.abrupt("return",a(ye(n.message)));case 8:a(qe(e)),a(we("Message envoy\xe9e avec succes")),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),console.log(r.t0.message),a(ye(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}()}(t,a)),l("")},children:[Object(Z.jsx)(W.a.Label,{children:"Reply"}),Object(Z.jsx)(W.a.Text,{children:Object(Z.jsx)("h4",{children:"Veuillez repondre \xe0 notre client ici"})}),Object(Z.jsx)(W.a.Control,{value:o,onChange:function(e){l(e.target.value)},as:"textarea",rows:3,name:"detail"}),Object(Z.jsx)("div",{className:"text-right mt-4",children:Object(Z.jsx)(U.a,{variant:"info",type:"submit",children:"Repondre"})})]})},it=function(){var e=Object(E.m)().tId,t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0],c=(r[1],Object(a.useState)("")),s=Object(i.a)(c,2),o=(s[0],s[1],Object($.c)((function(e){return e.tickets}))),l=o.isLoading,d=o.error,b=o.selectedTicket,h=o.replyMsg,p=o.replyTicketError,x=Object($.c)((function(e){return e.user})).user,O=Object($.b)();Object(a.useEffect)((function(){return O(qe(e)),O(F()),function(){(h||p)&&O(Te())}}),[n,e,O,h,p]);return Object(Z.jsxs)(Z.Fragment,{children:[" ",Object(Z.jsx)(ue,{}),Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Ve,{page:"Ticket"})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[l&&Object(Z.jsx)(G.a,{variant:"primary",animation:"border"}),d&&Object(Z.jsx)(q.a,{variant:"danger",children:d}),p&&Object(Z.jsx)(q.a,{variant:"danger",children:p}),h&&"En attente de la reponse de l'operateur"==x.etape&&Object(Z.jsx)(q.a,{variant:"success",children:"Ce ticket est en cours de Traitement"}),h&&"Traitement"==x.etape&&Object(Z.jsx)(q.a,{variant:"success",children:"Ce ticket est en Traitement"}),h&&"Fermeture"==x.etape&&Object(Z.jsx)(q.a,{variant:"success",children:"Ce ticket est ferm\xe9"})]})}),Object(Z.jsxs)(z.a,{children:["Identifiant : ",e,Object(Z.jsxs)(J.a,{style:{backgroundColor:"orange",borderRadius:"2rem",opacity:"0.8",boxShadow:"0px 0px 9px cyan"},children:[Object(Z.jsxs)("div",{className:"subject",children:["Sujet: ",b.subject]}),Object(Z.jsxs)("div",{className:"date",children:["Date de reclammation:"," ",b.openAt&&new Date(b.openAt).toLocaleString()]}),Object(Z.jsxs)("div",{className:"status",children:["Status: ",b.status]}),Object(Z.jsxs)("div",{className:"priority",children:["Priorite: ",b.priority]})]}),Object(Z.jsxs)(J.a,{className:"text-right",children:["En attente de la reponse de l'operateur"==b.status&&"En attente de la reponse de l'operateur"==x.etape&&Object(Z.jsx)(U.a,{variant:"outline-info",onClick:function(){return O((t=e,function(){var e=Object(j.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Se()),e.prev=1,e.next=4,Ee(t);case 4:if("error"!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",r(Ce(a.message)));case 7:r(qe(t)),r(Le("Ce ticket est en traitement")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message),r(Ce(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()));var t},disabled:"Traitement"===b.status,children:"Commencer la resolution"})," ","Traitement"==b.status&&"Traitement"==x.etape&&Object(Z.jsx)(U.a,{variant:"outline-info",onClick:function(){return O((t=e,function(){var e=Object(j.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Se()),e.prev=1,e.next=4,ze(t);case 4:if("error"!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",r(Ce(a.message)));case 7:r(qe(t)),r(Le("Ce ticket est en fermeture")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message),r(Ce(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()));var t},disabled:"Fermeture"===b.status,children:"Fermer le ticket"}),"Fermeture"==b.status&&"Fermeture"==x.etape&&Object(Z.jsx)(U.a,{variant:"outline-info",onClick:function(){return O((t=e,function(){var e=Object(j.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Se()),e.prev=1,e.next=4,Me(t);case 4:if("error"!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",r(Ce(a.message)));case 7:r(qe(t)),r(Le("Ce ticket est ferm\xe9")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.message),r(Ce(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()));var t},disabled:"Fermer"===b.status,children:"Fermer le ticket"})]})]}),Object(Z.jsx)(z.a,{className:"mt-4",children:Object(Z.jsx)(J.a,{children:b.conversations&&Object(Z.jsx)(ct,{msg:b.conversations})})}),Object(Z.jsx)("hr",{style:{backgroundColor:"orange"}}),Object(Z.jsx)(z.a,{className:"mt-4",children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(st,{_id:e})})})]})," "]})},ot=r(115),lt=["children"],ut=function(e){var t=e.children,r=Object(ot.a)(e,lt),n=Object($.b)(),c=Object($.c)((function(e){return e.login})).isAuth,s=Object($.c)((function(e){return e.user})).user;return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.parse(localStorage.getItem("crmSite")),(n=a.refreshJWT)||r("Token not found!"),e.next=5,w.a.get("https://devagileicrm.herokuapp.com/v1/tokens",{headers:{Authorization:n}});case 5:"success"===(c=e.sent).data.status&&sessionStorage.setItem("accessJWT",c.data.accessJWT),t(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),"Request failed with status code 403"===e.t0.message&&localStorage.removeItem("crmSite"),r(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}());case 2:e.sent&&n(H());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!s._id&&n(F()),!sessionStorage.getItem("accessJWT")&&localStorage.getItem("crmSite")&&e(),!c&&sessionStorage.getItem("accessJWT")&&n(H())}),[n,c,s._id]),Object(Z.jsx)(E.d,Object(ee.a)(Object(ee.a)({},r),{},{render:function(e){var r=e.location;return c?Object(Z.jsx)(je,{children:t}):Object(Z.jsx)(E.c,{to:{pathname:"/",state:{from:r}}})}}))},jt=Object(d.b)({name:"userRegistration",initialState:{isLoading:!1,status:"",message:""},reducers:{registrationPending:function(e){e.isLoading=!0},registrationSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.status="success",e.message=r},registrationError:function(e,t){var r=t.payload;e.isLoading=!1,e.status="error",e.message=r}}}),dt=jt.reducer,bt=jt.actions,ht=bt.registrationPending,pt=bt.registrationSuccess,xt=bt.registrationError,Ot=dt,mt=r(64),ft=r(34),gt={name:"Donald Trump",phone:"0611111111",email:"fakeemail2@email.com",company:"Mac Code",address:"Texas",password:"sfsd#3Dsg",confirmPass:"sfsd#3Dsg"},vt={isLenthy:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpclChr:!1,confirmPass:!1},kt=function(){var e=Object($.b)(),t=Object(a.useState)(gt),r=Object(i.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(vt),o=Object(i.a)(s,2),l=o[0],d=o[1],b=Object(a.useState)("Selectioner"),h=Object(i.a)(b,2),p=h[0],x=h[1],O=Object(a.useState)("Selectioner"),m=Object(i.a)(O,2),f=m[0],g=m[1],v=Object($.c)((function(e){return e.registration})),k=v.isLoading,w=v.status,y=v.message;Object(a.useEffect)((function(){}),[n]);var S=function(e){var t=e.target,r=t.name,a=t.value;if(c(Object(ee.a)(Object(ee.a)({},n),{},Object(X.a)({},r,a))),"password"===r){var s=a.length>8,i=/[A-Z]/.test(a),o=/[a-z]/.test(a),u=/[0-9]/.test(a),j=/[@,#,$,%,&]/.test(a);d(Object(ee.a)(Object(ee.a)({},l),{},{isLenthy:s,hasUpper:i,hasLower:o,hasNumber:u,hasSpclChr:j}))}"confirmPass"===r&&d(Object(ee.a)(Object(ee.a)({},l),{},{confirmPass:n.password===a}))};return Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)("h1",{className:"text-info",children:"Cre\xe9r un compte"})})}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:y&&Object(Z.jsx)(q.a,{variant:"success"===w?"success":"danger",children:y})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsxs)(W.a,{onSubmit:function(t){t.preventDefault();var r,a=n.name,c=n.phone,s=n.email,i=n.company,o=n.address,l=n.password;e((r={name:a,phone:c,email:s,company:i,address:o,password:l,speciality:p,etape:f},function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ht()),e.next=4,C(r);case 4:"success"===(a=e.sent).status?t(pt(a.message)):t(xt(a.message)),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(xt(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Nom complet"}),Object(Z.jsx)(W.a.Control,{type:"text",name:"name",value:n.name,onChange:S,placeholder:"Your name",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Telephone"}),Object(Z.jsx)(W.a.Control,{type:"number",name:"phone",value:n.phone,onChange:S,placeholder:"Phone",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Email"}),Object(Z.jsx)(W.a.Control,{type:"email",name:"email",value:n.email,onChange:S,placeholder:"Enter email",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Nom de l'entreprise"}),Object(Z.jsx)(W.a.Control,{type:"text",name:"company",value:n.company,onChange:S,placeholder:"Company name",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Addresse"}),Object(Z.jsx)(W.a.Control,{type:"text",name:"address",value:n.address,onChange:S,placeholder:"Full address",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"specialite"}),Object(Z.jsxs)(mt.a,{alignRight:!0,title:p,value:p,id:"dropdown-menu-align-right",onSelect:function(e){console.log(e),x(e)},required:!0,children:[Object(Z.jsx)(ft.a.Item,{eventKey:"Pedagogique",children:"Pedagogique"}),Object(Z.jsx)(ft.a.Item,{eventKey:"Technique",children:"Technique"}),Object(Z.jsx)(ft.a.Item,{eventKey:"R\xe9seau",children:"R\xe9seau"})]})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Etape"}),Object(Z.jsxs)(mt.a,{alignRight:!0,title:f,value:f,id:"dropdown-menu-align-right",onSelect:function(e){console.log(e),g(e)},required:!0,children:[Object(Z.jsx)(ft.a.Item,{eventKey:"En attente de la reponse de l'operateur",children:"En attente de la reponse de l'operateur"}),Object(Z.jsx)(ft.a.Item,{eventKey:"Traitement",children:"Traitement"}),Object(Z.jsx)(ft.a.Item,{eventKey:"Fermer",children:"Fermer"})]})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Mot de passe"}),Object(Z.jsx)(W.a.Control,{type:"password",name:"password",value:n.password,onChange:S,placeholder:"Password",required:!0})]}),Object(Z.jsxs)(W.a.Group,{children:[Object(Z.jsx)(W.a.Label,{children:"Confirmer le mot de passe"}),Object(Z.jsx)(W.a.Control,{type:"password",name:"confirmPass",value:n.confirmPass,onChange:S,placeholder:"Confirm Password",required:!0})]}),Object(Z.jsx)(W.a.Text,{children:!l.confirmPass&&Object(Z.jsx)("div",{className:"text-danger mb-3",children:"MDP non synchronis\xe9!"})}),Object(Z.jsxs)("ul",{className:"mb-4",children:[Object(Z.jsx)("li",{className:l.isLenthy?"text-success":"text-danger",children:"Min 8 characters"}),Object(Z.jsx)("li",{className:l.hasUpper?"text-success":"text-danger",children:"At least one upper case"}),Object(Z.jsx)("li",{className:l.hasLower?"text-success":"text-danger",children:"At least one lower case"}),Object(Z.jsx)("li",{className:l.hasNumber?"text-success":"text-danger",children:"At least one number"}),Object(Z.jsxs)("li",{className:l.hasSpclChr?"text-success":"text-danger",children:["At least on of the special characters i.e @ # $ % &"," "]})]}),Object(Z.jsx)(U.a,{variant:"primary",type:"submit",disabled:Object.values(l).includes(!1),children:"Submit"}),k&&Object(Z.jsx)(G.a,{variant:"info",animation:"border"})]})})}),Object(Z.jsx)(z.a,{className:"py-4",children:Object(Z.jsxs)(J.a,{children:["Already have an account ",Object(Z.jsx)("a",{href:"/",children:"Login Now"})]})})]})},wt=(r(236),function(){return Object(Z.jsx)("div",{className:"registration-page ",children:Object(Z.jsx)("div",{className:"mt-5",children:Object(Z.jsx)(o.a,{className:"form-box",children:Object(Z.jsx)(kt,{})})})})}),yt=(r(237),{status:"",message:""}),St=function(){var e=Object(E.m)(),t={_id:e._id,email:e.email},r=Object(a.useState)(yt),n=Object(i.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:r=e.sent,s(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!c.status&&e()}),[c]),Object(Z.jsx)("div",{className:"registration-page",children:Object(Z.jsx)("div",{className:"mt-5",children:Object(Z.jsxs)(o.a,{className:"form-box",children:[!c.status&&Object(Z.jsx)(G.a,{variant:"info",animation:"border"}),c.status&&Object(Z.jsx)(q.a,{variant:"success"===c.status?"success":"danger",children:c.message})]})})})},Lt=Object(d.b)({name:"customerList",initialState:{customers:[],isLoading:!1,error:"",searchCustomerList:[],selectedCustomer:{},replyMsg:""},reducers:{fetchCustomerLoading:function(e,t){e.isLoading=!0},fetchCustomerSuccess:function(e,t){e.customers=t.payload,e.searchCustomerList=t.payload,e.isLoading=!1},fetchCustomerFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r},searchCustomers:function(e,t){var r=t.payload;e.searchCustomerList=e.customers.filter((function(e){return r?e.name.toLowerCase().includes(r.toLowerCase()):e}))},fetchSingleCustomerLoading:function(e){e.isLoading=!0},fetchSingleCustomerSuccess:function(e,t){var r=t.payload;e.selectedCustomer=r,e.isLoading=!1,e.error=""},fetchSingleCustomerFail:function(e,t){var r=t.payload;e.isLoading=!1,e.error=r}}}),Ct=Lt.reducer,Tt=Lt.actions,Nt=Tt.fetchCustomerLoading,Pt=Tt.fetchCustomerSuccess,At=Tt.fetchCustomerFail,Ft=Tt.searchCustomers,It=Tt.fetchSingleCustomerFail,Et=Tt.fetchSingleCustomerSuccess,Mt=Tt.fetchSingleCustomerLoading,zt=Ct,Jt=function(){var e=Object($.b)();return Object(Z.jsx)("div",{children:Object(Z.jsx)(W.a,{children:Object(Z.jsxs)(W.a.Group,{as:z.a,children:[Object(Z.jsx)(W.a.Label,{column:!0,sm:"3",style:{color:"white",boxShadow:"0px 3px 9px black"},children:"Rechercher:"}),Object(Z.jsx)(J.a,{sm:"9",children:Object(Z.jsx)(W.a.Control,{name:"searchStr",onChange:function(t){var r,a=t.target.value;e((r=a,function(e){e(Ft(r))})),console.log(a)},placeholder:"Rechercher ..."})})]})})})},qt=function(){var e=Object($.c)((function(e){return e.customers})),t=e.searchCustomerList,r=e.isLoading,a=e.error,n=t;if(r)return Object(Z.jsxs)("div",{children:[Object(Z.jsx)(We.WindMillLoading,{}),Object(Z.jsx)("h3",{style:{"text-align":"center","margin-top":"150px",color:"cyan"},children:"Loading..."})]});if(a)return Object(Z.jsx)("h3",{children:a});var c=[{dataField:"_id",text:"Identifiant du client"},{dataField:"name",text:"Nom du client",formatter:function(e,t,r,a){return Object(Z.jsx)(Be.Link,{to:"/client/".concat(t._id),children:t.name})}},{dataField:"email",text:"Email",style:function(e,t,r,a){return e.includes("aui")?{backgroundColor:"green"}:e.includes("gmail")?{backgroundColor:"gray"}:{backgroundColor:"black"}}}];return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(M.a,{children:t.length?Object(Z.jsx)(_e.a,{classes:"table table-striped table-dark",hover:!0,keyField:"id",data:n,columns:c,responsive:!0,pagination:Re()()}):Object(Z.jsx)(Ue.a,{className:"table table-striped table-dark",children:Object(Z.jsx)("tr",{children:Object(Z.jsxs)("td",{colSpan:"5",className:"text-center",children:["Vous n'avez auncun ticket de reclamation en cours",""]})})})})})},Wt=function(){var e=Object($.b)(),t=Object(a.useState)(""),r=Object(i.a)(t,2),n=r[0];r[1];return Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Nt()),e.prev=1,e.next=4,new Promise(function(){var e=Object(j.a)(u.a.mark((function e(t,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("https://devagileicrm.herokuapp.com/v1/admin/allUsers",{headers:{Authorization:sessionStorage.getItem("accessJWT")}});case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());case 4:r=e.sent,t(Pt(r.data.result)),r.data.result||t(At({message:"error couldn't load"})),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(At(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),e(Je)}),[n,e]),Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(Ve,{page:"Client Lists"})]})}),Object(Z.jsxs)(z.a,{className:"mt-4",children:[Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Be.Link,{to:"/add-ticket",children:Object(Z.jsx)(U.a,{variant:"info",children:"Ajouter un nouveau client"})})}),Object(Z.jsx)(J.a,{className:"text-right",children:Object(Z.jsx)(Jt,{})})]}),Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(qt,{})})})]})},Ut=function(){var e=Object(E.m)().cId,t=Object(a.useState)(""),r=Object(i.a)(t,2),n=(r[0],r[1],Object(a.useState)("")),c=Object(i.a)(n,2),s=(c[0],c[1],Object($.c)((function(e){return e.customers}))),o=s.isLoading,l=s.error,d=s.selectedCustomer,b=Object($.b)();Object(a.useEffect)((function(){var t;b((t=e,function(){var e=Object(j.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Mt()),e.prev=1,e.next=4,P(t);case 4:a=e.sent,console.log(a),r(Et(a.data.result)),a.data.result||r(It({message:"error couldn't load"})),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r(It(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))}),[e,b]);return Object(Z.jsxs)(Z.Fragment,{children:[" ",Object(Z.jsxs)(M.a,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)(z.a,{children:Object(Z.jsx)(J.a,{children:Object(Z.jsx)(Ve,{page:"Client"})})}),Object(Z.jsx)(z.a,{children:Object(Z.jsxs)(J.a,{children:[o&&Object(Z.jsx)(G.a,{variant:"primary",animation:"border"}),l&&Object(Z.jsx)(q.a,{variant:"danger",children:l})]})}),Object(Z.jsxs)(z.a,{className:"bg-transparent",style:{fontSize:"40px",color:"black",backgroundColor:"transparent",borderRadius:"2rem",boxShadow:"10px 11px 200px cyan",paddingBottom:"50px",paddingTop:"50px",textAlign:"center"},children:[Object(Z.jsxs)(J.a,{children:[" ",Object(Z.jsx)("h2",{style:{boxShadow:"1px 3px 10px black",textAlign:"center"},children:"Identifiant :"})," ",Object(Z.jsx)("h1",{children:e})," "]}),Object(Z.jsxs)(J.a,{children:[Object(Z.jsxs)("div",{className:"name",children:[" ",Object(Z.jsx)("h2",{style:{boxShadow:"1px 3px 10px black",textAlign:"center"},children:"Name:"})," ",Object(Z.jsx)("h1",{children:d.name})," "]}),Object(Z.jsxs)("div",{className:"email",children:[" ",Object(Z.jsx)("h2",{style:{boxShadow:"1px 3px 10px black",textAlign:"center"},children:"Email:"})," ",Object(Z.jsx)("h1",{children:d.email})," "]})]}),Object(Z.jsx)(J.a,{className:"text-right"})]})]})," "]})};var Gt=function(){return Object(Z.jsx)("div",{className:"App",children:Object(Z.jsx)(Be.BrowserRouter,{children:Object(Z.jsxs)(E.g,{children:[Object(Z.jsx)(E.d,{exact:!0,path:"/",children:Object(Z.jsx)(ne,{})}),Object(Z.jsx)(E.d,{exact:!0,path:"/resetpasswordform",children:Object(Z.jsx)(ae,{})}),Object(Z.jsx)(E.d,{exact:!0,path:"/registration",children:Object(Z.jsx)(wt,{})}),Object(Z.jsx)(E.d,{exact:!0,path:"/verification/:_id/:email",children:Object(Z.jsx)(St,{})}),Object(Z.jsx)(ut,{path:"/dashboard",children:Object(Z.jsx)($e,{})}),Object(Z.jsx)(ut,{path:"/Allclients",children:Object(Z.jsx)(Wt,{})}),Object(Z.jsx)(ut,{path:"/add-ticket",children:Object(Z.jsx)(et,{})}),Object(Z.jsx)(ut,{path:"/P-Btickets",children:Object(Z.jsx)(rt,{})}),Object(Z.jsx)(ut,{path:"/P-Mtickets",children:Object(Z.jsx)(at,{})}),Object(Z.jsx)(ut,{path:"/P-Etickets",children:Object(Z.jsx)(nt,{})}),Object(Z.jsx)(ut,{path:"/client/:cId",children:Object(Z.jsx)(Ut,{})}),Object(Z.jsx)(E.d,{path:"/ticket/:tId",children:Object(Z.jsx)(it,{})})]})})})},Rt=Object(d.b)({name:"newTicket",initialState:{isLoading:!1,error:"",successMsg:""},reducers:{openNewTicketPending:function(e){e.isLoading=!0},openNewTicketSuccess:function(e,t){var r=t.payload;e.isLoading=!1,e.successMsg=r},openNewTicketFail:function(e,t){var r=t.payload;e.isLoading=!0,e.error=r},restSuccessMSg:function(e){e.isLoading=!0,e.successMsg=""}}}),Dt=Rt.actions,_t=(Dt.openNewTicketPending,Dt.openNewTicketSuccess,Dt.openNewTicketFail,Dt.restSuccessMSg,Rt.reducer),Bt=Object(d.a)({reducer:{tickets:Ne,login:V,user:v,customers:zt,openTicket:_t,registration:Ot}});r(238);s.a.render(Object(Z.jsx)(n.a.StrictMode,{children:Object(Z.jsx)($.a,{store:Bt,children:Object(Z.jsx)(Gt,{})})}),document.getElementById("root"))},49:function(e){e.exports=JSON.parse("{}")}},[[239,1,2]]]);
//# sourceMappingURL=main.890a2272.chunk.js.map